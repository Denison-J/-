{"version":3,"file":"Register.js","sources":["pages/Register/Register.vue","D:/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvUmVnaXN0ZXIvUmVnaXN0ZXIudnVl"],"sourcesContent":["<template>\n\t<view class=\"register-container\">\n\t  \n\t  <view class=\"title-container\">\n\t    <text class=\"title\">账号注册</text>\n\t    <text class=\"subtitle\">创建新账号，开启全新体验</text>\n\t  </view>\n\t  \n\t  <form class=\"register-form\" @submit=\"formSubmit\" @reset=\"formReset\">\n\t    <!-- 用户名输入 -->\n\t    <view class=\"form-group\">\n\t      <view class=\"input-wrapper\">\n\t        <icon type=\"user\" size=\"20\" class=\"input-icon\"></icon>\n\t        <input type=\"text\" name=\"username\" placeholder=\"请输入用户名\"  placeholder-class=\"placeholder\" @input=\"handleUsernameInput\" value=\"\" />\n\t      </view>\n\t    </view>\n\t    \n\t    <!-- 密码输入 -->\n\t    <view class=\"form-group\">\n\t      <view class=\"input-wrapper\">\n\t        <icon type=\"lock\" size=\"20\" class=\"input-icon\"></icon>\n\t        <input \n\t          name=\"password\" \n\t          placeholder=\"请设置密码\" \n\t          placeholder-class=\"placeholder\"\n\t          @input=\"handlePasswordInput\"\n\t          value=\"\"\n\t        />\n\t      </view>\n\t    </view>\n\t    \n\t    <!-- 确认密码输入 -->\n\t    <view class=\"form-group\">\n\t      <view class=\"input-wrapper\">\n\t        <icon type=\"lock\" size=\"20\" class=\"input-icon\"></icon>\n\t        <input \n\t          name=\"confirmPassword\" \n\t          placeholder=\"请确认密码\" \n\t          placeholder-class=\"placeholder\"\n\t          @input=\"handleConfirmPasswordInput\"\n\t          value=\"\"\n\t        />\n\t      </view>\n\t    </view>\n\t    \n\t    <!-- 同意协议（修复v-model错误） -->\n\t    <view class=\"agreement\">\n\t      <checkbox-group @change=\"onAgreementChange\">\n\t        <label class=\"checkbox-label\">\n\t          <checkbox value=\"agree\" :checked=\"isAgreed\" />\n\t          <text>我已阅读并同意</text>\n\t          <text class=\"agreement-link\" @tap=\"navigateToAgreement\">《用户协议》</text>\n\t          <text>和</text>\n\t          <text class=\"agreement-link\" @tap=\"navigateToPrivacy\">《隐私政策》</text>\n\t        </label>\n\t      </checkbox-group>\n\t    </view>\n\t    \n\t    <!-- 注册按钮 -->\n\t    <button \n\t      formType=\"submit\" \n\t      class=\"register-btn\"\n\t    >\n\t      注册\n\t    </button>\n\t    \n\t    <!-- 已有账号 -->\n\t    <view class=\"login-link\">\n\t      <text>已有账号？</text>\n\t      <navigator url=\"/pages/my-login/my-login\" class=\"link\">立即登录</navigator>\n\t    </view>\n\t  </form>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tusername: '',\n\t\t\t\tpassword: '',\n\t\t\t\tconfirmPassword: '',\n\t\t\t\t//email: '',\n\t\t\t\t//phone: '',\n\t\t\t\tisAgreed: false // 用普通变量存储勾选状态\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\tconsole.log('页面刚加载，这是onLoad里的日志');\n\t\t},\n\t\tmethods: {\n\t\t\thandleUsernameInput(e){\n\t\t\t\tthis.username = e.detail.value;\n\t\t\t\tconsole.log(\"输入的用户名：\", this.username);\n\t\t\t},\n\t\t\t\n\t\t\thandlePasswordInput(e) {\n\t\t\t\tthis.password = e.detail.value;\n\t\t\t\tconsole.log(\"输入的密码：\", this.password);\n\t\t\t},\n\t\t\t\n\t\t\thandleConfirmPasswordInput(e) {\n\t\t\t\tthis.confirmPassword = e.detail.value;\n\t\t\t\tconsole.log(\"输入的确认密码：\", this.confirmPassword);\n\t\t\t},\n\t\t\t\n\t\t\t// 处理协议勾选状态变化\n\t\t\tonAgreementChange(e) {\n\t\t\t\t// 当勾选时，e.detail.value会包含\"agree\"\n\t\t\t\tthis.isAgreed = e.detail.value.includes('agree');\n\t\t\t\tconsole.log(\"协议勾选状态：\", this.isAgreed);\n\t\t\t},\n\t\t\t\n\t\t\tnavigateToAgreement() {\n\t\t\t\tconsole.log('点击了用户协议');\n\t\t\t},\n\t\t\t\n\t\t\tnavigateToPrivacy() {\n\t\t\t\tconsole.log('点击了隐私政策');\n\t\t\t},\n\t\t\t\n\t\t\tasync formSubmit() {\n\t\t\t\tconsole.log('开始执行注册逻辑');\n\t\t\t\t\n\t\t\t\t// 协议勾选判断\n\t\t\t\tif (!this.isAgreed) {\n\t\t\t\t\tuni.showToast({ title: '请同意用户协议', icon: 'none' });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (this.password !== this.confirmPassword) {\n\t\t\t\t\tuni.showToast({ title: '两次密码不一致', icon: 'none' });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst registerData = {\n\t\t\t\t\tusername: this.username,\n\t\t\t\t\tpassword: this.password,\n\t\t\t\t\temail: this.email,\n\t\t\t\t\tphone: this.phone\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t  console.log('准备发送请求，数据：', registerData);\n\t\t\t\t  const res = await uni.request({\r\n\t\t\t\t    url: \"http://localhost:8080/api/user/register\",\r\n\t\t\t\t    method: \"POST\",\r\n\t\t\t\t    header: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\t    data: JSON.stringify(registerData), // 显式转 JSON\r\n\t\t\t\t  });\n\t\t\t\t\n\t\t\t\t  if (res.statusCode >= 200 && res.statusCode < 300) {\n\t\t\t\t    console.log('请求成功，响应：', res.data);\n\t\t\t\t    if (res.data.code === 200) {\n\t\t\t\t      uni.showToast({ title: \"注册成功\" });\n\t\t\t\t    } else {\n\t\t\t\t      uni.showToast({ title: res.data.msg || \"注册失败\", icon: \"none\" });\n\t\t\t\t    }\n\t\t\t\t  } else {\n\t\t\t\t    console.error('HTTP 错误：', res.statusCode);\n\t\t\t\t    uni.showToast({ title: `请求失败 (${res.statusCode})`, icon: \"none\" });\n\t\t\t\t  }\n\t\t\t\t} catch (error) {\n\t\t\t\t  console.error('网络异常：', error);\n\t\t\t\t  uni.showToast({ title: \"网络错误，请检查连接\", icon: \"none\" });\n\t\t\t\t}\n\t\t\t}, // 这里是两个方法之间的分隔逗号（正确）\n\t\t\t\n\t\t\tformReset() {\n\t\t\t\tconsole.log('表单重置');\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n\n<style>\n.register-container {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n  background-color: #f5f5f5;\n  padding: 0 30rpx;\n  box-sizing: border-box;\n  background-color: #f8dfc3;\n}\n\n.title-container {\n  margin-top: 80rpx;\n  margin-bottom: 60rpx;\n  text-align: center;\n}\n\n.title {\n  font-size: 36rpx;\n  font-weight: bold;\n  color: #333;\n  display: block;\n  margin-bottom: 15rpx;\n}\n\n.subtitle {\n  font-size: 24rpx;\n  color: #666;\n}\n\n.register-form {\n  width: 100%;\n  margin-top: 50rpx;\n}\n\n.form-group {\n  margin-bottom: 50rpx;\n}\n\n.input-wrapper {\n  display: flex;\n  align-items: center;\n  background-color: #fff;\n  border-radius: 50rpx;\n  padding: 0 20rpx;\n  height: 90rpx;\n  border: 1rpx solid #ee1;\n  transition: border-color 0.3s;\n}\n\n.input-wrapper:focus-within {\n  border-color: #07c160;\n}\n\n.input-icon {\n  color: #999;\n  margin-right: 20rpx;\n  width: 30rpx;\n  text-align: center;\n}\n\n.input {\n  flex: 1;\n  height: 100%;\n  font-size: 28rpx;\n  color: #333;\n}\n\n.placeholder {\n  color: #ccc;\n}\n\n.agreement {\n  margin: 10rpx 0 40rpx 0;\n  padding-top: 30rpx;\n  padding-bottom: 80rpx;\n}\n\n.checkbox-label {\n  display: flex;\n  align-items: center;\n  font-size: 24rpx;\n  color: #666;\n}\n\n.agreement-link {\n  color: #07c160;\n  margin: 0 5rpx;\n}\n\n.register-btn {\n  width: 100%;\n  height: 90rpx;\n  line-height: 90rpx;\n  font-size: 30rpx;\n  background-color: #07c160;\n  color: #fff;\n  border-radius: 8rpx;\n  margin-bottom: 30rpx;\n}\n\n.register-btn::after {\n  border: none;\n}\n\n.login-link {\n  text-align: center;\n  font-size: 26rpx;\n  color: #666;\n  margin-top: 20rpx;\n}\n\n.link {\n  color: #07c160;\n  text-decoration: none;\n  margin-left: -26rpx;\n}\n</style>\n","import MiniProgramPage from 'C:/Users/邓浩键/Desktop/咖啡豆检测uniapp/咖啡豆检测/pages/Register/Register.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}